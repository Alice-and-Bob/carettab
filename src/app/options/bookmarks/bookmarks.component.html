<form #bookmarkOptions="ngForm" novalidate>
  <fieldset>
    <div class="row row--gap">
      <div class="col6">
        <div class="formBox h100">
          <h3 title="Bookmarks bar shows the links you have saved in the browser's bookmarks bar folder.">Bookmarks Bar</h3>
          <div class="control">
            <div class="toggle" id="bookmarksBar">
              <input type="checkbox" id="toggleBookmarks" name="toggleBookmarks" [(ngModel)]="settings.config.bookmarks.bookmarksBar" (change)="saveAll()">
              <label for="toggleBookmarks" class="fas fa-check"></label>
            </div>
          </div>
          <div class="control">
            <label for="bookmarksSize" class="fas fa-text-height labelIcon" title="Change the size of the bookmarks bar."></label>
            <div class="control__group">
              <input id="bookmarksSize" name="bookmarksSize" [(ngModel)]="settings.config.bookmarks.bookmarkScaling" type="range" class="flex__auto" min="1" max="100">
              <output [value]="settings.config.bookmarks.bookmarkScaling"></output>
            </div>
          </div>
        </div>
      </div>
      <div class="col6">
        <div class="formBox h100">
          <h3 title="Quick links are custom links saved within CaretTab.">Quick Links</h3>
          <div class="control">
            <div class="toggle" id="quickLinksBar">
              <input type="checkbox" id="toggleQuickLinks" name="toggleQuickLinks" [(ngModel)]="settings.config.bookmarks.quickLinks" (change)="saveAll()">
              <label for="toggleQuickLinks" class="fas fa-check"></label>
            </div>
          </div>
          <div class="control">
            <label for="quickLinksSize" class="fas fa-text-height labelIcon" title="Change the size of the quick links."></label>
            <div class="control__group">
              <input id="quickLinksSize" name="quickLinksSize" [(ngModel)]="settings.config.bookmarks.quickLinksScaling" type="range" class="flex__auto" min="1" max="100">
              <output [value]="settings.config.bookmarks.quickLinksScaling"></output>
            </div>
          </div>
        </div>
      </div>
    </div>
  </fieldset>
</form>
<ng-container *ngIf="settings.config.bookmarks.quickLinks === true">
  <h2>Quick Links</h2>
  <div class="divTable">
    <div class="divTableHeading">
      <div class="divTableRow">
        <div class="divTableHead">Link Label</div>
        <div class="divTableHead">Link URL</div>
        <div class="divTableHead actions">Actions</div>
      </div>
    </div>
    <form class="divTableBody zebra" #quickLinksList="ngForm" novalidate>
      <div class="divTableRow" *ngFor="let link of settings.config.bookmarks.links; let i = index">
        <div class="divTableCell">
          <input
            type="text"
            [name]="'label'+i"
            #editLabel="ngModel"
            [(ngModel)]="link.label"
            [disabled]="!ifEdit(i)"
            class="fieldGroup__field w100 bookmarks-field">
        </div>
        <div class="divTableCell">
          <input
            type="text"
            [name]="'url'+i"
            #editUrl="ngModel"
            [(ngModel)]="link.url"
            [disabled]="!ifEdit(i)"
            required
            class="fieldGroup__field w100 bookmarks-field">
          <div class="valMsg" *ngIf="quickLinksList.invalid && quickLinksList.submitted">Link must have a URL (website address).</div>
        </div>
        <div class="divTableCell actions">
          <button
            [type]="ifEdit(i) ? 'submit' : 'button'"
            class="btn"
            [title]="ifEdit(i) ? 'Save Link' : 'Edit Link'"
            (click)="ifEdit(i) ? updateLink(link.label, link.url, i, quickLinksList.valid) : enterEditMode(i)">
            <i class="fas fa-fw fa-save" [ngClass]="{'fa-save': ifEdit(i), 'fa-pencil-alt': !ifEdit(i)}"></i>
          </button>
          <button type="button" class="btn" (click)="deleteLink(link, i)"><i class="fas fa-fw fa-trash-alt"></i></button>
        </div>
      </div>
    </form>
    <form class="divTableBody" #newLink="ngForm" novalidate (ngSubmit)="addLink(newLink, newLink.valid)">
      <div class="divTableRow">
        <div class="divTableCell pt1">
          <div class="fieldGroup">
            <input type="text" placeholder="Add new link" #newLabel="ngModel" name="label" [(ngModel)]="label" class="fieldGroup__field w100 bookmarks-field">
          </div>
        </div>
        <div class="divTableCell pt1">
          <div class="fieldGroup">
            <input type="text" placeholder="https://" #newUrl="ngModel" required name="url" [(ngModel)]="url" class="fieldGroup__field w100 bookmarks-field">
            <div class="valMsg" *ngIf="newUrl.invalid && newLink.submitted">Link must have a URL (website address).</div>
          </div>
        </div>
        <div class="divTableCell pt1 actions">
          <div class="fieldGroup">
            <button type="submit" class="btn" title="Save"><i class="fas fa-fw fa-save"></i></button>
          </div>
        </div>
      </div>
    </form>
  </div>
</ng-container>
